#### 文档背景

本文档用于记录需要对接的真实接口地址，用于完成小程序接口对接

#### token刷新

- url:/api/mp/auth/refresh-token
- method:POST
- request:

```
{
    refreshToken: string;
}
```

- response:

```
/**
 * 刷新后的登录响应结果
 *
 * ApiResultMpRefreshTokenResponse
 */
export interface Response {
    code?: string;
    data?: MpRefreshTokenResponse;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}

/**
 * MpRefreshTokenResponse
 */
export interface MpRefreshTokenResponse {
    /**
     * 新的访问token
     */
    accessToken?: string;
    /**
     * 过期时间（秒），如：3600秒后过期
     */
    expiresIn?: number;
    /**
     * 新的刷新token
     */
    refreshToken?: string;
    [property: string]: any;
}
```

#### 登出接口

- url:/api/mp/auth/logout
- method:POST
- request: 无
- response:

```
/**
 * 登出响应结果
 *
 * ApiResultVoid
 */
export interface Response {
    code?: string;
    data?: null;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}
```

#### 注销接口

- url:/api/mp/user/unbind-miniprogram
- method:POST
- request:无
- response:

```
/**
 * 注销响应结果
 *
 * ApiResultVoid
 */
export interface Response {
    code?: string;
    data?: null;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}
```

#### 查询模拟票列表

- url:/api/mp/ticket/query-my-ticket-list
- method:GET
- request:无
- response:

```
/**
 * ApiResultListMpTicketResponse
 */
export interface Response {
    code?: string;
    data?: MpTicketResponse[];
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}

/**
 * 模拟票响应DTO
 *
 * MpTicketResponse
 */
export interface MpTicketResponse {
    /**
     * 本次实收，元，保留2位小数
     */
    actualAmount?: number;
    /**
     * 助考员id
     */
    assistantUserId?: string;
    /**
     * 助考员姓名
     */
    assistantUserName?: string;
    /**
     * 预约日期，如：yyyy-MM-dd
     */
    bookDate?: string;
    /**
     * 教练姓名
     */
    coachName?: string;
    /**
     * 教练电话
     */
    coachPhone?: string;
    /**
     * 创建时间
     */
    createTime?: string;
    /**
     * 创建人ID
     */
    createUserId?: number;
    /**
     * 创建人姓名
     */
    createUserName?: string;
    /**
     * 制单人姓名
     */
    handlerName?: string;
    /**
     * 模拟票ID
     */
    id?: number;
    /**
     * 模拟场区，如：A场区
     */
    mockArea?: string;
    /**
     * 模拟时长，如：2学时
     */
    mockDuration?: string;
    /**
     * 模拟项目，如：C2双学时
     */
    mockItem?: string;
    /**
     * 订单金额，元，保留2位小数
     */
    orderAmount?: number;
    /**
     * 上车序号，如：科目三
     */
    queueNumber?: string;
    /**
     * 使用说明
     */
    remark?: string;
    /**
     * 驾校名称
     */
    schoolName?: string;
    /**
     * 状态：UNUSED-未使用，VERIFIED-已核销
     */
    status?: Status;
    /**
     * 状态名称
     */
    statusName?: string;
    /**
     * 证件号码
     */
    studentCardNumber?: string;
    /**
     * 学员姓名
     */
    studentName?: string;
    /**
     * 学员电话
     */
    studentPhone?: string;
    /**
     * 套餐名称
     */
    suiteName?: string;
    /**
     * 更新时间
     */
    updateTime?: string;
    /**
     * 更新人ID
     */
    updateUserId?: number;
    /**
     * 更新人姓名
     */
    updateUserName?: string;
    /**
     * 核销时间
     */
    verifyTime?: string;
    /**
     * 核销人ID
     */
    verifyUserId?: number;
    /**
     * 核销人姓名
     */
    verifyUserName?: string;
    [property: string]: any;
}

/**
 * 状态：UNUSED-未使用，VERIFIED-已核销
 */
export enum Status {
    Unused = "UNUSED",
    Verified = "VERIFIED",
}
```

#### 模拟票助考列表

profile：模拟票助考页面的列表接口

-url：/api/mp/ticket/query-my-assistant-ticket-list
-method:GET
-request:无
-response:

```
/**
 * ApiResultListMpTicketResponse
 */
export interface Response {
    code?: string;
    data?: MpTicketResponse[];
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}

/**
 * 模拟票响应DTO
 *
 * MpTicketResponse
 */
export interface MpTicketResponse {
    /**
     * 本次实收，元，保留2位小数
     */
    actualAmount?: number;
    /**
     * 助考员id
     */
    assistantUserId?: string;
    /**
     * 助考员姓名
     */
    assistantUserName?: string;
    /**
     * 预约日期，如：yyyy-MM-dd
     */
    bookDate?: string;
    /**
     * 教练姓名
     */
    coachName?: string;
    /**
     * 教练电话
     */
    coachPhone?: string;
    /**
     * 创建时间
     */
    createTime?: string;
    /**
     * 创建人ID
     */
    createUserId?: number;
    /**
     * 创建人姓名
     */
    createUserName?: string;
    /**
     * 制单人姓名
     */
    handlerName?: string;
    /**
     * 模拟票ID
     */
    id?: number;
    /**
     * 模拟场区，如：A场区
     */
    mockArea?: string;
    /**
     * 模拟时长，如：2学时
     */
    mockDuration?: string;
    /**
     * 模拟项目，如：C2双学时
     */
    mockItem?: string;
    /**
     * 订单金额，元，保留2位小数
     */
    orderAmount?: number;
    /**
     * 上车序号，如：科目三
     */
    queueNumber?: string;
    /**
     * 使用说明
     */
    remark?: string;
    /**
     * 驾校名称
     */
    schoolName?: string;
    /**
     * 状态：UNUSED-未使用，VERIFIED-已核销
     */
    status?: Status;
    /**
     * 状态名称
     */
    statusName?: string;
    /**
     * 证件号码
     */
    studentCardNumber?: string;
    /**
     * 学员姓名
     */
    studentName?: string;
    /**
     * 学员电话
     */
    studentPhone?: string;
    /**
     * 套餐名称
     */
    suiteName?: string;
    /**
     * 更新时间
     */
    updateTime?: string;
    /**
     * 更新人ID
     */
    updateUserId?: number;
    /**
     * 更新人姓名
     */
    updateUserName?: string;
    /**
     * 核销时间
     */
    verifyTime?: string;
    /**
     * 核销人ID
     */
    verifyUserId?: number;
    /**
     * 核销人姓名
     */
    verifyUserName?: string;
    [property: string]: any;
}

/**
 * 状态：UNUSED-未使用，VERIFIED-已核销
 */
export enum Status {
    Unused = "UNUSED",
    Verified = "VERIFIED",
}
```

#### 模拟票核销

- url:/api/mp/ticket/verify-ticket
- method:POST
- request:

#### 发布车辆列表

- url:/api/mp/car/query-my-publish-car-page
- method:POST
- request:

```
/**
 * MpQueryMyPublishCarPageRequest
 */
export interface Request {
    /**
     * 关键词搜索（名称、品牌、车系、款式）。可以为空。
     */
    keyword?: string;
    /**
     * 页码，从1开始。
     */
    pageNum?: number;
    /**
     * 每页数量，默认50条。
     */
    pageSize?: number;
    /**
     * 车辆状态筛选。可以为空。
     */
    statusIn?: StatusIn[];
    [property: string]: any;
}

export enum StatusIn {
    OnSale = "ON_SALE",
    Sold = "SOLD",
    WaitApprove = "WAIT_APPROVE",
    WaitRectify = "WAIT_RECTIFY",
}
```

- response:

```
/**
 * ApiResultPageResponseMpCarResponse
 */
export interface Response {
    code?: string;
    data?: PageResponseMpCarResponse;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}

/**
 * PageResponseMpCarResponse
 */
export interface PageResponseMpCarResponse {
    /**
     * 数据列表
     */
    list?: MpCarResponse[];
    /**
     * 页码，从1开始。
     */
    pageNum?: number;
    /**
     * 每页记录数
     */
    pageSize?: number;
    /**
     * 总记录数
     */
    total?: number;
    [property: string]: any;
}

/**
 * 车辆响应DTO
 *
 * MpCarResponse
 */
export interface MpCarResponse {
    /**
     * 车龄（年）
     */
    age?: number;
    /**
     * 审批意见
     */
    approveRemark?: string;
    /**
     * 审批时间
     */
    approveTime?: string;
    /**
     * 审批人ID
     */
    approveUserId?: number;
    /**
     * 审批人姓名
     */
    approveUserName?: string;
    /**
     * 品牌
     */
    brand?: string;
    /**
     * 颜色
     */
    color?: string;
    /**
     * 联系电话
     */
    contactPhone?: string;
    /**
     * 成交价格（万元）,保留2位小数
     */
    dealPrice?: number;
    /**
     * 成交时间
     */
    dealTime?: string;
    /**
     * 收藏状态：FAVORITE-已收藏，NOT_FAVORITE-未收藏
     */
    favorStatus?: FavorStatus;
    /**
     * 收藏时间
     */
    favorTime?: string;
    /**
     * 底价（万元）,保留2位小数
     */
    floorPrice?: number;
    /**
     * 车辆ID
     */
    id?: number;
    /**
     * 图片文件ID列表，逗号分隔
     */
    imageFileIds?: string;
    /**
     * 图片url列表，每个元素包含文件名和文件url，用于预览图片
     */
    imageUrlList?: FileUrlInfo[];
    /**
     * 上牌城市
     */
    licenseCity?: string;
    /**
     * 上牌日期，yyyy-MM-dd
     */
    licenseDate?: string;
    /**
     * 里程（万公里）,保留2位小数
     */
    mileage?: number;
    /**
     * 车型ID
     */
    modelId?: number;
    /**
     * 加装项目
     */
    modifyItems?: string;
    /**
     * 车辆名称
     */
    name?: string;
    /**
     * 发布时间
     */
    publishTime?: string;
    /**
     * 发布人ID
     */
    publishUserId?: number;
    /**
     * 发布人姓名
     */
    publishUserName?: string;
    /**
     * 车况描述
     */
    remark?: string;
    /**
     * 售价（万元）,保留2位小数
     */
    sellPrice?: number;
    /**
     * 出售人ID
     */
    sellUserId?: number;
    /**
     * 出售人姓名
     */
    sellUserName?: string;
    /**
     * 车系
     */
    series?: string;
    /**
     * 车辆状态
     */
    status?: Status;
    /**
     * 车辆状态名称
     */
    statusName?: string;
    /**
     * 过户次数
     */
    transferCount?: number;
    /**
     * 使用性质
     */
    usage?: string;
    /**
     * 款式
     */
    variant?: string;
    [property: string]: any;
}

/**
 * 收藏状态：FAVORITE-已收藏，NOT_FAVORITE-未收藏
 */
export enum FavorStatus {
    Favorite = "FAVORITE",
    NotFavorite = "NOT_FAVORITE",
}

/**
 * FileUrlInfo
 */
export interface FileUrlInfo {
    /**
     * 文件名, 上传到cos后的文件名，格式：logo/uuid.ext，或者car/uuid.ext
     * 例如：logo/1234567890.png, car/1234567890.png
     */
    fileName?: string;
    /**
     * 文件url，可以直接预览图片。
     */
    fileUrl?: string;
    [property: string]: any;
}

/**
 * 车辆状态
 */
export enum Status {
    OnSale = "ON_SALE",
    Sold = "SOLD",
    WaitApprove = "WAIT_APPROVE",
    WaitRectify = "WAIT_RECTIFY",
}
```

接口说明：该接口用于profile页面点击我要卖车按钮跳转到的我要卖车页面，用于分页查询当前的发布车辆信息列表。
1、在请求参数中：

- keyword：可选，搜索关键字，可以为空。当前场景没有搜索，可不填写该字段
- 响应参数：请根据返回的数据字段进行参数转换。
- 列表使用car-card组件进行展示，其中品牌+车系+款式的显示后端定义了专门的字段name进行表示，不需要前端进行拼接。
- car-card组件的图片预览只获取imageUrlList中第一个元素的fileUrl进行展示，如果没有则使用当前默认的/Users/xiaofeng/WeChatProjects/miniprogram-1/assets/imgs/logo.png
- 当前接口是分页查询，pageSize在接口请求是有默认值，所以前端只处理分页pageNum就行。在响应时，需要根据total计算当前最大分页数，不能无限制查询下一页。
- car-selling页面列表逻辑：下拉滑到底再次下拉进行下一页查询，查询到的数据需要和当前数据进行追加，如果已经是最后页，则显示“没有更多数据”文本。不设置列表上方下拉进行刷新的逻辑

#### 删除车辆

- URL：/api/mp/car/delete-car

#### 新增车辆

- URL：/api/mp/car/create-car
- method：POST
- request:

```
/**
 * 新增车辆请求参数，包含车辆基本信息、价格、联系方式等
 *
 * CarCreateRequest
 */
export interface Request {
    /**
     * 车龄（年）
     */
    age?: number;
    /**
     * 颜色
     */
    color?: string;
    /**
     * 联系电话
     */
    contactPhone: string;
    /**
     * 底价（万元）,保留2位小数
     */
    floorPrice: number;
    /**
     * 图片文件ID列表，逗号分隔
     */
    imageFileIds?: string;
    /**
     * 上牌城市
     */
    licenseCity?: string;
    /**
     * 上牌日期,格式yyyy-MM-dd
     */
    licenseDate?: string;
    /**
     * 里程（万公里）,保留2位小数
     */
    mileage?: number;
    /**
     * 车型ID，关联car_model表
     */
    modelId: number;
    /**
     * 加装项目
     */
    modifyItems?: string;
    /**
     * 车辆名称，最大100字符。
     */
    name?: string;
    /**
     * 车况描述
     */
    remark?: string;
    /**
     * 售价（万元）,保留2位小数
     */
    sellPrice: number;
    /**
     * 过户次数
     */
    transferCount?: number;
    /**
     * 使用性质（家用、营运等）
     */
    usage?: string;
    [property: string]: any;
}
```

- response:
```
/**
 * 新增车辆的ID
 *
 * ApiResultLong
 */
export interface Response {
    code?: string;
    data?: number;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}
```

#### 车辆更新接口

- URL：/api/mp/car/update-car
- method：POST
- request:
```
/**
 * 修改车辆请求参数，包含车辆ID和需要更新的信息
 *
 * CarUpdateRequest
 */
export interface Request {
    /**
     * 车龄（年）
     */
    age?: number;
    /**
     * 车辆ID
     */
    carId: number;
    /**
     * 颜色
     */
    color?: string;
    /**
     * 联系电话
     */
    contactPhone: string;
    /**
     * 底价（万元）,保留2位小数
     */
    floorPrice: number;
    /**
     * 图片文件ID列表，逗号分隔
     */
    imageFileIds?: string;
    /**
     * 上牌城市
     */
    licenseCity?: string;
    /**
     * 上牌日期,格式yyyy-MM-dd
     */
    licenseDate?: string;
    /**
     * 里程（万公里）,保留2位小数
     */
    mileage?: number;
    /**
     * 车型ID，关联car_model表
     */
    modelId: number;
    /**
     * 加装项目
     */
    modifyItems?: string;
    /**
     * 车辆名称，最大100字符。如果不传，则使用"品牌+车系+款式"
     */
    name?: string;
    /**
     * 车况描述
     */
    remark?: string;
    /**
     * 售价（万元）,保留2位小数
     */
    sellPrice: number;
    /**
     * 过户次数
     */
    transferCount?: number;
    /**
     * 使用性质（家用、营运等）
     */
    usage?: string;
    [property: string]: any;
}
```

- response:
```
/**
 * 操作结果
 *
 * ApiResultVoid
 */
export interface Response {
    code?: string;
    data?: null;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}
```

#### 审批车辆列表

1、入口：profile页面中点击审批车辆按钮，跳转到审批车辆列表页面，在列表页面需要查询审批车辆列表


2、接口定义：

- URL：/api/mp/car/query-wait-approve-car-page
- method：POST
- request:
```
/**
 * MpQueryWaitApproveCarPageRequest
 */
export interface Request {
    /**
     * 关键词搜索（名称、品牌、车系、款式）。可以为空。
     */
    keyword?: string;
    /**
     * 页码，从1开始。
     */
    pageNum?: number;
    /**
     * 每页数量，默认50条。
     */
    pageSize?: number;
    [property: string]: any;
}
```
- response:
```
/**
 * ApiResultPageResponseMpCarResponse
 */
export interface Response {
    code?: string;
    data?: PageResponseMpCarResponse;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}

/**
 * PageResponseMpCarResponse
 */
export interface PageResponseMpCarResponse {
    /**
     * 数据列表
     */
    list?: MpCarResponse[];
    /**
     * 页码，从1开始。
     */
    pageNum?: number;
    /**
     * 每页记录数
     */
    pageSize?: number;
    /**
     * 总记录数
     */
    total?: number;
    [property: string]: any;
}

/**
 * 车辆响应DTO
 *
 * MpCarResponse
 */
export interface MpCarResponse {
    /**
     * 车龄（年）
     */
    age?: number;
    /**
     * 审批意见
     */
    approveRemark?: string;
    /**
     * 审批时间
     */
    approveTime?: string;
    /**
     * 审批人ID
     */
    approveUserId?: number;
    /**
     * 审批人姓名
     */
    approveUserName?: string;
    /**
     * 品牌
     */
    brand?: string;
    /**
     * 颜色
     */
    color?: string;
    /**
     * 联系电话
     */
    contactPhone?: string;
    /**
     * 成交价格（万元）,保留2位小数
     */
    dealPrice?: number;
    /**
     * 成交时间
     */
    dealTime?: string;
    /**
     * 收藏状态：FAVORITE-已收藏，NOT_FAVORITE-未收藏
     */
    favorStatus?: FavorStatus;
    /**
     * 收藏时间
     */
    favorTime?: string;
    /**
     * 底价（万元）,保留2位小数
     */
    floorPrice?: number;
    /**
     * 车辆ID
     */
    id?: number;
    /**
     * 图片文件ID列表，逗号分隔
     */
    imageFileIds?: string;
    /**
     * 图片url列表，每个元素包含文件名和文件url，用于预览图片
     */
    imageUrlList?: FileUrlInfo[];
    /**
     * 上牌城市
     */
    licenseCity?: string;
    /**
     * 上牌日期，yyyy-MM-dd
     */
    licenseDate?: string;
    /**
     * 里程（万公里）,保留2位小数
     */
    mileage?: number;
    /**
     * 车型ID
     */
    modelId?: number;
    /**
     * 加装项目
     */
    modifyItems?: string;
    /**
     * 车辆名称
     */
    name?: string;
    /**
     * 发布时间
     */
    publishTime?: string;
    /**
     * 发布人ID
     */
    publishUserId?: number;
    /**
     * 发布人姓名
     */
    publishUserName?: string;
    /**
     * 车况描述
     */
    remark?: string;
    /**
     * 售价（万元）,保留2位小数
     */
    sellPrice?: number;
    /**
     * 出售人ID
     */
    sellUserId?: number;
    /**
     * 出售人姓名
     */
    sellUserName?: string;
    /**
     * 车系
     */
    series?: string;
    /**
     * 车辆状态
     */
    status?: Status;
    /**
     * 车辆状态名称
     */
    statusName?: string;
    /**
     * 过户次数
     */
    transferCount?: number;
    /**
     * 使用性质
     */
    usage?: string;
    /**
     * 款式
     */
    variant?: string;
    [property: string]: any;
}

/**
 * 收藏状态：FAVORITE-已收藏，NOT_FAVORITE-未收藏
 */
export enum FavorStatus {
    Favorite = "FAVORITE",
    NotFavorite = "NOT_FAVORITE",
}

/**
 * FileUrlInfo
 */
export interface FileUrlInfo {
    /**
     * 文件名, 上传到cos后的文件名，格式：logo/uuid.ext，或者car/uuid.ext
     * 例如：logo/1234567890.png, car/1234567890.png
     */
    fileName?: string;
    /**
     * 文件url，可以直接预览图片。
     */
    fileUrl?: string;
    [property: string]: any;
}

/**
 * 车辆状态
 */
export enum Status {
    OnSale = "ON_SALE",
    Sold = "SOLD",
    WaitApprove = "WAIT_APPROVE",
    WaitRectify = "WAIT_RECTIFY",
}
```

在审批车辆列表页面中，接口逻辑与我要卖车的车辆列表页面逻辑基本一样：需要设置滚动列表的上拉下一页查询，下拉刷新回到第一页。

#### 审批车辆接口
- 作用：在car-form页面中审批模式时，点击驳回或通过时调用接口进行审批。
- URL：/api/mp/car/approve-car
- method：POST
- request:
```
/**
 * 审批车辆请求参数，包含车辆ID、审批结果、审批意见
 *
 * CarApprovalRequest
 */
export interface Request {
    /**
     * 车龄（年）
     */
    age?: number;
    /**
     * 审批结果：APPROVED-通过，REJECTED-驳回
     */
    approvalResult: ApprovalResult;
    /**
     * 审批意见，最大200个字符
     */
    approveRemark: string;
    /**
     * 车辆ID
     */
    carId: number;
    /**
     * 颜色
     */
    color?: string;
    /**
     * 联系电话
     */
    contactPhone: string;
    /**
     * 底价（万元）,保留2位小数
     */
    floorPrice: number;
    /**
     * 图片文件ID列表，逗号分隔
     */
    imageFileIds?: string;
    /**
     * 上牌城市
     */
    licenseCity?: string;
    /**
     * 上牌日期,格式yyyy-MM-dd
     */
    licenseDate?: string;
    /**
     * 里程（万公里）,保留2位小数
     */
    mileage?: number;
    /**
     * 车型ID，关联car_model表
     */
    modelId: number;
    /**
     * 加装项目
     */
    modifyItems?: string;
    /**
     * 车辆名称，最大100字符。如果不传，则使用"品牌+车系+款式"
     */
    name?: string;
    /**
     * 车况描述
     */
    remark?: string;
    /**
     * 售价（万元）,保留2位小数
     */
    sellPrice: number;
    /**
     * 过户次数
     */
    transferCount?: number;
    /**
     * 使用性质（家用、营运等）
     */
    usage?: string;
    [property: string]: any;
}

/**
 * 审批结果：APPROVED-通过，REJECTED-驳回
 */
export enum ApprovalResult {
    Approved = "APPROVED",
    Rejected = "REJECTED",
}
```
- response:
```
/**
 * 操作结果
 *
 * ApiResultVoid
 */
export interface Response {
    code?: string;
    data?: null;
    message?: string;
    timestamp?: number;
    traceId?: string;
    [property: string]: any;
}
```