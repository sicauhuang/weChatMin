<!--pages/vehicle-approval/vehicle-approval.wxml-->
<view class="vehicle-approval-container">
  <!-- 加载状态 -->
  <view wx:if="{{loading && vehicleList.length === 0}}" class="loading-container">
    <view class="loading-text">正在加载...</view>
  </view>

  <!-- 车辆列表 -->
  <scroll-view wx:elif="{{!isEmpty}}"
               class="vehicle-list"
               scroll-y="{{true}}"
               enhanced="{{true}}"
               enable-back-to-top="{{true}}"
               enable-passive="{{true}}"
               bindscrolltolower="onScrollToLower"
               bindscroll="onScroll">
    <!-- 列表项 -->
    <view class="vehicle-item" wx:for="{{vehicleList}}" wx:key="carId">
      <car-card
        vehicle-data="{{item}}"
        bind:onCardTap="onCardTap"
        bind:onFavoriteToggle="onFavoriteToggle"
        bind:onSelectionChange="onSelectionChange"
        delete-mode="{{deleteMode}}"
        is-selected="{{selectedVehicles.indexOf(item.carId) !== -1}}"
        show-favorite-button="{{false}}"
      />
    </view>

    <!-- 加载更多提示 -->
    <view wx:if="{{loading && vehicleList.length > 0}}" class="load-more-container">
      <view class="load-more-text">正在加载更多...</view>
    </view>

    <!-- 没有更多数据提示 -->
    <view wx:elif="{{!hasMore && vehicleList.length > 0}}" class="no-more-container">
      <view class="no-more-text">已加载全部数据</view>
    </view>
  </scroll-view>

  <!-- 空状态 -->
  <view wx:else class="empty-container">
    <view class="empty-icon">📋</view>
    <view class="empty-title">暂无待审批车辆</view>
    <view class="empty-desc">当前没有需要审批的车辆信息</view>
    <view class="empty-action">
      <button class="refresh-btn" bind:tap="refreshData">刷新页面</button>
    </view>
  </view>
</view>
